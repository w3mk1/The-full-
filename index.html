<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNTF Go - Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø·Ø§Øª</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <style>
        :root { --p: #006d3a; --s: #f3f4f1; --c: #ffffff; --t: #1a1c19; }
        .dark-mode { --s: #111411; --c: #1c1f1c; --t: #e2e3dd; }

        body { background: var(--s); color: var(--t); font-family: 'Segoe UI', sans-serif; margin: 0; padding: 10px; transition: 0.3s; }
        .app-container { max-width: 500px; margin: auto; }
        .card { background: var(--c); border-radius: 24px; padding: 20px; margin-bottom: 15px; box-shadow: 0 4px 12px rgba(0,0,0,0.05); }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± */
        .search-group { position: relative; margin-bottom: 15px; }
        .input-box { 
            width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #ccc; 
            background: var(--s); color: var(--t); font-size: 1rem; box-sizing: border-box;
        }
        
        .suggestions {
            position: absolute; top: 100%; left: 0; right: 0; 
            background: var(--c); border-radius: 0 0 12px 12px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1); z-index: 1000;
            max-height: 200px; overflow-y: auto; display: none;
        }
        .suggestion-item { padding: 12px; cursor: pointer; border-bottom: 1px solid var(--s); }
        .suggestion-item:hover { background: var(--p); color: white; }

        .btn-go { background: var(--p); color: white; border: none; width: 100%; padding: 15px; border-radius: 50px; font-weight: bold; cursor: pointer; }
        #map { height: 200px; border-radius: 15px; margin-top: 15px; }
    </style>
</head>
<body class="light-mode">

<div class="app-container">
    <header style="display: flex; justify-content: space-between; align-items: center; padding: 10px;">
        <h2><i class="fas fa-train"></i> SNTF Go</h2>
        <button onclick="document.body.classList.toggle('dark-mode')" style="background:none; border:none; font-size:1.5rem;">ğŸŒ™</button>
    </header>

    <div class="card">
        <label>ğŸ“ Ù…Ø­Ø·Ø© Ø§Ù„Ø§Ù†Ø·Ù„Ø§Ù‚ (Ø§Ù„Ø°Ù‡Ø§Ø¨):</label>
        <div class="search-group">
            <input type="text" id="from-input" class="input-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø·Ø©..." onkeyup="searchStation('from')">
            <div id="from-list" class="suggestions"></div>
        </div>

        <label>ğŸ Ù…Ø­Ø·Ø© Ø§Ù„ÙˆØµÙˆÙ„ (Ø§Ù„Ø¥ÙŠØ§Ø¨):</label>
        <div class="search-group">
            <input type="text" id="to-input" class="input-box" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ø­Ø·Ø©..." onkeyup="searchStation('to')">
            <div id="to-list" class="suggestions"></div>
        </div>

        <button class="btn-go" onclick="showResults()">Ø¹Ø±Ø¶ Ø§Ù„Ù…ÙˆØ§Ø¹ÙŠØ¯ ÙˆØ§Ù„Ù…Ø³Ø§Ø±</button>
    </div>

    <div id="result-section" class="card" style="display:none;">
        <div id="map"></div>
        <div id="trip-info" style="margin-top:15px; text-align:center; font-weight:bold;"></div>
    </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script>
    // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ø­Ø·Ø§Øª Ø§Ù„ÙƒØ§Ù…Ù„Ø© Ù„Ø®Ø· Ø§Ù„Ø¹ÙØ±ÙˆÙ† - Ø§Ù„Ø¬Ø²Ø§Ø¦Ø±
    const stations = [
        { name: "Ø§Ù„Ø¹ÙØ±ÙˆÙ†", lat: 36.4674, lng: 2.6263 },
        { name: "Ù…ÙˆØ²Ø§ÙŠØ©", lat: 36.4800, lng: 2.6800 },
        { name: "Ø§Ù„Ø´ÙØ©", lat: 36.4900, lng: 2.7200 },
        { name: "Ø§Ù„Ø¨Ù„ÙŠØ¯Ø©", lat: 36.4701, lng: 2.8288 },
        { name: "Ø¨Ù†ÙŠ Ù…Ø±Ø§Ø¯", lat: 36.5050, lng: 2.8610 },
        { name: "Ø¨ÙˆÙØ§Ø±ÙŠÙƒ", lat: 36.5744, lng: 2.9119 },
        { name: "Ø¨Ø§Ø¨Ø§ Ø¹Ù„ÙŠ", lat: 36.6500, lng: 3.0100 },
        { name: "Ø¨Ø¦Ø± ØªÙˆØªØ©", lat: 36.6433, lng: 2.9872 },
        { name: "Ø¬Ø³Ø± Ù‚Ø³Ù†Ø·ÙŠÙ†Ø©", lat: 36.7050, lng: 3.0600 },
        { name: "Ø§Ù„Ø­Ø±Ø§Ø´", lat: 36.7200, lng: 3.1300 },
        { name: "Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± - Ø¢ØºØ§", lat: 36.7645, lng: 3.0515 }
    ];

    let map;

    function searchStation(type) {
        const input = document.getElementById(`${type}-input`);
        const list = document.getElementById(`${type}-list`);
        const query = input.value.toLowerCase();
        
        list.innerHTML = "";
        if (query.length < 1) { list.style.display = "none"; return; }

        const filtered = stations.filter(s => s.name.includes(query));
        
        filtered.forEach(s => {
            const div = document.createElement("div");
            div.className = "suggestion-item";
            div.innerText = s.name;
            div.onclick = () => {
                input.value = s.name;
                input.setAttribute('data-lat', s.lat);
                input.setAttribute('data-lng', s.lng);
                list.style.display = "none";
            };
            list.appendChild(div);
        });
        list.style.display = "block";
    }

    function showResults() {
        const from = document.getElementById('from-input');
        const to = document.getElementById('to-input');

        if (!from.getAttribute('data-lat') || !to.getAttribute('data-lat')) {
            alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„Ù…Ø­Ø·Ø§Øª Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø©");
            return;
        }

        document.getElementById('result-section').style.display = 'block';
        document.getElementById('trip-info').innerText = `Ø§Ù„Ø±Ø­Ù„Ø© Ù…Ù† ${from.value} Ø¥Ù„Ù‰ ${to.value}`;

        initMap(
            [from.getAttribute('data-lat'), from.getAttribute('data-lng')],
            [to.getAttribute('data-lat'), to.getAttribute('data-lng')]
        );
    }

    function initMap(start, end) {
        if (map) { map.remove(); }
        map = L.map('map').setView(start, 11);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(map);
        
        L.marker(start).addTo(map).bindPopup("Ø§Ù†Ø·Ù„Ø§Ù‚").openPopup();
        L.marker(end).addTo(map).bindPopup("ÙˆØµÙˆÙ„");
        L.polyline([start, end], {color: '#006d3a'}).addTo(map);
    }
</script>
</body>
</html>
